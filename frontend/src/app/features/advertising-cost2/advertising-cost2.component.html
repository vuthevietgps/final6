<div class="cost2-page">
  <div class="toolbar">
    <button class="btn btn-primary" (click)="addNew()">‚ûï Th√™m m·ªõi</button>
    <button class="btn" (click)="load()">üîÑ L√†m m·ªõi</button>
    <select [value]="filterAdAccountId()" (change)="filterAdAccountId.set($any($event.target).value); onFilterChange()">
      <option value="all">T·∫•t c·∫£ TK QC</option>
      <option *ngFor="let a of adAccounts()" [value]="a._id">{{ a.name }} ({{ a.accountId }})</option>
    </select>
  <button class="btn" (click)="downloadCsv()">‚¨áÔ∏è T·∫£i xu·ªëng CSV</button>
  <label class="btn" for="csvInput">‚¨ÜÔ∏è T·∫£i l√™n CSV</label>
  <input id="csvInput" type="file" accept=".csv,text/csv" (change)="onFileSelected($event)" style="display:none" />
  </div>

  <div class="error" *ngIf="error()">{{ error() }}</div>

  <table class="table">
    <thead>
      <tr>
        <th>Ng√†y (dd/MM/yyyy)</th>
  <th>ID Nh√≥m qu·∫£ng c√°o</th>
  <th>T√†i kho·∫£n QC</th>
        <th>ƒê√£ chi</th>
        <th>CPM</th>
        <th>CPC</th>
        <th>T·∫ßn su·∫•t</th>
        <th>H√†nh ƒë·ªông</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let r of items()">
        <td>
          <input type="text" [ngModel]="r.date" (keydown)="onEnter(r, 'date', $event)" (blur)="onBlur(r, 'date', $event)" placeholder="dd/MM/yyyy" />
        </td>
        <td>
          <input type="text" [ngModel]="r.adGroupId" (keydown)="onEnter(r, 'adGroupId', $event)" (blur)="onBlur(r, 'adGroupId', $event)" />
        </td>
        <td>{{ r.adAccountName ? (r.adAccountName + ' (' + r.adAccountAccountId + ')') : '-' }}</td>
        <td>
          <input type="number" step="0.01" [ngModel]="r.spentAmount" (keydown)="onEnter(r, 'spentAmount', $event)" (blur)="onBlur(r, 'spentAmount', $event)" />
        </td>
        <td>
          <input type="number" step="0.01" [ngModel]="r.cpm" (keydown)="onEnter(r, 'cpm', $event)" (blur)="onBlur(r, 'cpm', $event)" />
        </td>
        <td>
          <input type="number" step="0.01" [ngModel]="r.cpc" (keydown)="onEnter(r, 'cpc', $event)" (blur)="onBlur(r, 'cpc', $event)" />
        </td>
        <td>
          <input type="number" step="1" [ngModel]="r.frequency" (keydown)="onEnter(r, 'frequency', $event)" (blur)="onBlur(r, 'frequency', $event)" />
        </td>
        <td>
          <button class="btn btn-sm btn-danger" (click)="remove(r)">X√≥a</button>
        </td>
      </tr>
      <tr *ngIf="items().length===0">
        <td colspan="7" class="center muted">Ch∆∞a c√≥ d·ªØ li·ªáu</td>
      </tr>
    </tbody>
  </table>
</div>
