<!-- 
File: features/ad-group-profit/ad-group-profit.component.html
Má»¥c Ä‘Ã­ch: Template hiá»ƒn thá»‹ bÃ¡o cÃ¡o lá»£i nhuáº­n theo nhÃ³m quáº£ng cÃ¡o theo ngÃ y
-->
<div class="ad-group-profit-container">
  <!-- Header -->
  <div class="header">
    <h2>ğŸ“Š Lá»£i nhuáº­n vÃ  chi phÃ­ quáº£ng cÃ¡o</h2>
    <p class="subtitle">Theo ngÃ y: Lá»£i nhuáº­n (Summary2) vÃ  Chi phÃ­ QC (QC2)</p>
  </div>

  <!-- Statistics Cards -->
  <div class="stats-grid">
    <div class="stat-card profit">
      <div class="stat-icon">ğŸ’°</div>
      <div class="stat-info">
        <div class="stat-label">Tá»•ng Lá»£i Nhuáº­n</div>
        <div class="stat-value">{{ formatCurrency(stats().totalProfit) }}</div>
      </div>
    </div>
    
    <div class="stat-card orders">
      <div class="stat-icon">ğŸ“¦</div>
      <div class="stat-info">
        <div class="stat-label">Tá»•ng ÄÆ¡n HÃ ng</div>
        <div class="stat-value">{{ formatNumber(stats().totalOrders) }}</div>
      </div>
    </div>
    
    <div class="stat-card groups">
      <div class="stat-icon">ğŸ“¢</div>
      <div class="stat-info">
        <div class="stat-label">NhÃ³m Quáº£ng CÃ¡o</div>
        <div class="stat-value">{{ formatNumber(stats().totalAdGroups) }}</div>
      </div>
    </div>
    
    <div class="stat-card average">
      <div class="stat-icon">ğŸ“Š</div>
      <div class="stat-info">
        <div class="stat-label">Lá»£i Nhuáº­n TB/ÄÆ¡n</div>
        <div class="stat-value">{{ formatCurrency(stats().avgProfitPerOrder) }}</div>
      </div>
    </div>
  </div>

  <!-- Filters -->
  <div class="filters-section">
    <div class="filters-row">
      <div class="filter-group">
        <label for="fromDate">Tá»« ngÃ y:</label>
        <input 
          type="date" 
          id="fromDate"
          [(ngModel)]="filters.from"
          class="form-control"
        >
      </div>
      
      <div class="filter-group">
        <label for="toDate">Äáº¿n ngÃ y:</label>
        <input 
          type="date" 
          id="toDate"
          [(ngModel)]="filters.to"
          class="form-control"
        >
      </div>
      
      <div class="filter-group">
        <label for="agentId">Agent ID:</label>
        <input 
          type="text" 
          id="agentId"
          [(ngModel)]="filters.agentId"
          placeholder="Äá»ƒ trá»‘ng Ä‘á»ƒ xem táº¥t cáº£"
          class="form-control"
        >
      </div>
      
      <div class="filter-actions">
        <button 
          (click)="applyFilters()" 
          class="btn btn-primary"
          [disabled]="loading()"
        >
          <span *ngIf="loading()">â³</span>
          <span *ngIf="!loading()">ğŸ”</span>
          TÃ¬m kiáº¿m
        </button>
        
        <button 
          (click)="resetFilters()" 
          class="btn btn-secondary"
          [disabled]="loading()"
        >
          ğŸ”„ Reset
        </button>
        
        <button 
          (click)="exportToCSV()" 
          class="btn btn-success"
          [disabled]="loading() || reports().length === 0"
        >
          ğŸ“ Xuáº¥t CSV
        </button>
      </div>
    </div>
  </div>

  <!-- Error Message -->
  <div *ngIf="error()" class="error-message">
    âš ï¸ {{ error() }}
  </div>

  <!-- Loading Indicator -->
  <div *ngIf="loading()" class="loading-indicator">
    <div class="spinner"></div>
    <span>Äang táº£i dá»¯ liá»‡u...</span>
  </div>

  <!-- Data Table -->
  <div *ngIf="!loading() && !error()" class="table-container">
    <table class="data-table">
      <thead>
        <tr>
          <th>NgÃ y ThÃ¡ng</th>
          <th>NhÃ³m Quáº£ng CÃ¡o</th>
          <th>Chi PhÃ­ QC (QC2)</th>
          <th>Lá»£i Nhuáº­n (Summary2)</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let report of reports(); trackBy: trackByDate" class="data-row">
          <td class="date-cell">{{ formatDate(report.date) }}</td>
          <td class="ad-group-cell">{{ report.adGroupName }} {{ '{' }}{{ report.adGroupId }}{{ '}' }}</td>
          <td class="currency-cell">{{ formatCurrency(report.adsCost || 0) }}</td>
          <td class="profit-cell" [ngClass]="getProfitColorClass(report.totalProfit)">
            {{ formatCurrency(report.totalProfit) }}
          </td>
        </tr>
        
        <!-- No Data Message -->
        <tr *ngIf="reports().length === 0" class="no-data-row">
          <td colspan="4" class="no-data-cell">
            ğŸ“­ KhÃ´ng cÃ³ dá»¯ liá»‡u trong khoáº£ng thá»i gian Ä‘Æ°á»£c chá»n
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
