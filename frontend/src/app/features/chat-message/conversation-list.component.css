.conversation-container{padding:18px 20px;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,sans-serif;background:var(--color-bg-alt);color:var(--color-text);min-height:100%;line-height:1.45;font-size:14px;}
.header-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;gap:12px;flex-wrap:wrap;}
.header-row h2{margin:0;font-size:20px;font-weight:600;letter-spacing:.5px;color:var(--color-text);display:flex;align-items:center;gap:8px;}
.filters input,.filters select{margin-right:10px;padding:6px 10px;border:1px solid var(--color-border-soft);border-radius:6px;background:var(--color-surface);color:var(--color-text);font-size:13px;min-width:140px;box-shadow:0 1px 0 rgba(0,0,0,.04);}
.filters input:focus,.filters select:focus{outline:2px solid var(--color-primary);outline-offset:1px;}
.btn,.mini{background:linear-gradient(180deg,var(--color-primary),var(--color-primary-accent));color:#fff;border:1px solid #1e4fbf;padding:7px 14px;border-radius:6px;cursor:pointer;font-size:13px;font-weight:500;box-shadow:0 1px 2px rgba(0,0,0,.35);transition:.15s;}
.mini{padding:5px 10px;font-size:12px;}
.btn:hover:not([disabled]),.mini:hover{filter:brightness(1.05);} 
.btn:active{transform:translateY(1px);} 
.btn[disabled]{opacity:.55;cursor:default;}
.conv-table{width:100%;border-collapse:separate;border-spacing:0 4px;font-size:13px;}
.conv-table th{background:var(--color-surface-alt);color:var(--color-text);font-weight:600;font-size:12px;text-transform:uppercase;letter-spacing:.5px;padding:10px 8px;border:none;position:sticky;top:0;z-index:2;}
.conv-table td{background:var(--color-surface);border:none;padding:8px 8px;border-top:1px solid var(--color-border-soft);border-bottom:1px solid var(--color-border-soft);}
.conv-table tbody tr{transition:background .15s,box-shadow .15s;cursor:pointer;}
.conv-table tbody tr:hover td{background:var(--color-surface-alt);}
.conv-table tr.needs td{background:#4b1818;border-top:1px solid #b91c1c;border-bottom:1px solid #b91c1c;color:#fca5a5;}
body:not(.dark) .conv-table tr.needs td{background:#ffe5e5;color:#1e293b;}
.conv-table tr.recent:not(.needs) td{background:#15324b;border-top:1px solid #1e4a6b;border-bottom:1px solid #1e4a6b;}
body:not(.dark) .conv-table tr.recent:not(.needs) td{background:#e0f2fe;}
.conv-table tr.needs:hover td{background:#5b1d1d;}
body:not(.dark) .conv-table tr.needs:hover td{background:#ffdcdc;}

/* Fanpage cell styling */
.fanpage-cell{display:flex;flex-direction:column;gap:2px;}
.fanpage-id{font-family:monospace;font-size:11px;background:var(--color-surface-alt);padding:2px 6px;border-radius:4px;border:1px solid var(--color-border-soft);width:fit-content;}
.fanpage-name{font-size:12px;font-weight:500;color:var(--color-text);margin-bottom:2px;}
.fb-link{text-decoration:none;font-size:14px;opacity:0.7;transition:opacity 0.2s;align-self:flex-start;}
.fb-link:hover{opacity:1;filter:brightness(1.2);}

/* Ad Group badge styling */
.ad-group-badge{font-family:monospace;font-size:11px;background:var(--color-primary);color:white;padding:2px 6px;border-radius:3px;font-weight:500;}
.no-ad-group{color:var(--color-text-muted);font-style:italic;}
.conv-table tr.recent:hover td{background:#1a3d5c;}
body:not(.dark) .conv-table tr.recent:hover td{background:#d5ecfb;}
.badge{padding:3px 8px;border-radius:999px;font-size:11px;font-weight:600;letter-spacing:.3px;display:inline-block;}
.badge.needs{background:var(--color-danger);color:#fff;box-shadow:0 0 0 1px #b91c1c inset;}
.badge.ok{background:var(--color-success);color:#fff;box-shadow:0 0 0 1px #15803d inset;}
.badge.ai-on{background:#0d5d2f;color:#fff;box-shadow:0 0 0 1px #15803d inset;}
body:not(.dark) .badge.ai-on{background:#12a150;}
.badge.ai-off{background:#5a1f14;color:#fca5a5;box-shadow:0 0 0 1px #b91c1c inset;}
body:not(.dark) .badge.ai-off{background:#ffe0e0;color:#b91c1c;}
.loading{padding:14px;font-size:13px;color:#64748b;}
.loading-messages{padding:30px 20px;text-align:center;color:var(--color-text-muted);font-size:13px;}
.loading-spinner{font-size:24px;margin-bottom:8px;animation:spin 1s linear infinite;}
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
.empty{opacity:.8;margin-top:24px;font-style:italic;}
.pagination{margin-top:16px;display:flex;align-items:center;gap:10px;font-size:13px;}
.pagination button{padding:6px 10px;background:#ffffff;border:1px solid #cbd5e1;color:#1e293b;cursor:pointer;border-radius:6px;box-shadow:0 1px 1px rgba(0,0,0,.05);} 
.pagination button:disabled{opacity:.5;cursor:default;} 
.pagination button:not(:disabled):hover{background:#f1f5f9;}
.modal-backdrop{position:fixed;inset:0;background:rgba(15,23,42,.55);display:flex;align-items:flex-start;justify-content:center;padding:40px 18px;z-index:200;backdrop-filter:blur(2px);} 
.modal{background:var(--color-surface);padding:16px 20px;width:80vw;max-width:1200px;max-height:85vh;overflow:hidden;border:1px solid var(--color-border);border-radius:8px;box-shadow:0 6px 24px -4px rgba(0,0,0,.45);display:flex;flex-direction:column;} 
.thread{display:flex;flex-direction:column;gap:6px;background:var(--color-surface-alt);padding:10px 14px;border-radius:8px;border:1px solid var(--color-border-soft);flex:1;overflow-y:auto;min-height:300px;max-height:50vh;scrollbar-width:thin;scrollbar-color:var(--color-border) transparent;}

/* Custom scrollbar for webkit browsers */
.thread::-webkit-scrollbar{width:6px;}
.thread::-webkit-scrollbar-track{background:transparent;}
.thread::-webkit-scrollbar-thumb{background:var(--color-border);border-radius:3px;}
.thread::-webkit-scrollbar-thumb:hover{background:var(--color-border-soft);} 
.msg{padding:8px 12px;border-radius:12px;font-size:13px;line-height:1.4;box-shadow:0 1px 2px rgba(0,0,0,.15);max-width:75%;word-wrap:break-word;margin:1px 0;}

/* Customer messages - align left */
.msg.in{background:#1e3a5f;border:1px solid #365980;color:#f1f5f9;align-self:flex-start;border-bottom-left-radius:4px;} 
body:not(.dark) .msg.in{background:#3b82f6;border-color:#2563eb;color:white;} 

/* System/AI messages - align right */
.msg.out{background:#374151;border:1px solid #4b5563;color:#f1f5f9;align-self:flex-end;border-bottom-right-radius:4px;} 
body:not(.dark) .msg.out{background:#6b7280;border-color:#4b5563;color:white;}

/* AI messages special styling */
.msg.ai{background:#059669;border:1px solid #10b981;color:white;align-self:flex-end;border-bottom-right-radius:4px;box-shadow:0 1px 3px rgba(5,150,105,.3);}
body:not(.dark) .msg.ai{background:#10b981;border-color:#059669;} 
.msg .meta{font-size:11px;opacity:.85;margin-bottom:8px;font-weight:500;display:flex;align-items:center;justify-content:space-between;gap:8px;}
.msg .meta .sender-label{font-weight:600;color:rgba(255,255,255,.9);}
.msg .meta .time-label{opacity:.7;font-size:10px;}
.msg .flags{margin-top:8px;display:flex;flex-wrap:wrap;gap:6px;}
.msg .flag-item{font-size:10px;font-weight:500;padding:2px 6px;border-radius:4px;display:inline-flex;align-items:center;gap:2px;}
.msg .flag-item.awaiting{background:rgba(245,158,11,.2);color:#f59e0b;border:1px solid rgba(245,158,11,.3);}
.msg .flag-item.adgroup{background:rgba(99,102,241,.2);color:#6366f1;border:1px solid rgba(99,102,241,.3);}
.msg .flag-item.ai-generated{background:rgba(16,185,129,.2);color:#10b981;border:1px solid rgba(16,185,129,.3);}

/* Message body styling */
.msg .body{font-size:14px;line-height:1.5;white-space:pre-wrap;word-break:break-word;}

/* Message alignment improvements */
.thread{align-items:stretch;}
.msg.in{margin-right:auto;}
.msg.out,.msg.ai{margin-left:auto;} 
.detail-actions{display:flex;gap:10px;margin-top:8px;align-items:center;}
.detail-actions .btn{background:linear-gradient(180deg,#475569,#324256);border:1px solid #2a3a4d;}
.detail-actions .btn:hover{filter:brightness(1.07);}
.performance-info{color:var(--color-primary);font-size:11px;margin-left:auto;opacity:0.8;} 
.meta-row{display:flex;gap:14px;font-size:12px;margin:8px 0 6px;opacity:.85;flex-wrap:wrap;font-weight:500;color:var(--color-text-soft);}
.reply-box{display:flex;flex-direction:column;gap:8px;border-top:1px solid var(--color-border-soft);padding:12px;background:var(--color-surface);border-radius:8px;margin-top:8px;box-shadow:0 1px 3px rgba(0,0,0,.1);}
.reply-box textarea{width:100%;background:var(--color-surface);border:1px solid var(--color-border-soft);color:var(--color-text);padding:10px 12px;border-radius:6px;font-family:inherit;font-size:13px;resize:vertical;min-height:80px;line-height:1.4;box-shadow:0 1px 2px rgba(0,0,0,.1);}
.reply-box textarea:focus{outline:2px solid var(--color-primary);outline-offset:1px;border-color:var(--color-primary);}
.reply-actions{display:flex;justify-content:flex-end;gap:8px;} 
.thread-layout{display:flex;gap:20px;flex:1;min-height:0;}
.thread-col{flex:3;display:flex;flex-direction:column;min-height:0;gap:8px;}
.order-col{flex:2;min-width:320px;max-width:400px;display:flex;flex-direction:column;gap:8px;background:var(--color-surface-alt);border:1px solid var(--color-border-soft);padding:12px 14px;border-radius:8px;overflow-y:auto;max-height:60vh;}
.order-col h4{margin:0 0 6px;font-size:14px;font-weight:600;color:var(--color-text);display:flex;align-items:center;gap:6px;}
.mini-hint{font-size:11px;color:var(--color-text-muted);margin-bottom:8px;padding:6px 8px;background:var(--color-surface);border-radius:6px;border:1px solid var(--color-border-soft);}
.form-grid{display:flex;flex-direction:column;gap:10px;}
.form-grid label{display:flex;flex-direction:column;font-size:11px;font-weight:600;color:var(--color-text);gap:4px;}
.form-grid input,.form-grid textarea,.form-grid select{border:1px solid var(--color-border-soft);border-radius:4px;padding:6px 8px;font-size:12px;background:var(--color-surface);color:var(--color-text);transition:border-color 0.2s;}
.form-grid input:focus,.form-grid textarea:focus,.form-grid select:focus{outline:2px solid var(--color-primary);outline-offset:1px;border-color:var(--color-primary);}
.draft-actions{display:flex;flex-direction:column;gap:8px;margin-top:12px;padding-top:12px;border-top:1px solid var(--color-border-soft);}
.action-row{display:flex;gap:6px;}
.action-row .mini,.action-row .btn{flex:1;font-size:10px;padding:5px 6px;}
.mini.secondary{background:var(--color-surface-alt);color:var(--color-text);border:1px solid var(--color-border-soft);box-shadow:0 1px 2px rgba(0,0,0,.1);}
.mini.secondary:hover{background:var(--color-surface);box-shadow:0 2px 4px rgba(0,0,0,.15);}
.mini.primary,.btn.primary{background:linear-gradient(180deg,var(--color-primary),var(--color-primary-accent));}
.btn.primary{padding:8px 12px;font-size:12px;}
.status-box{font-size:13px;padding:12px 16px;background:var(--color-surface);border:1px solid var(--color-border-soft);border-radius:8px;margin-top:12px;color:var(--color-text);font-weight:500;box-shadow:0 1px 3px rgba(0,0,0,.1);display:flex;align-items:center;gap:10px;}
.status-indicator{width:8px;height:8px;border-radius:50%;flex-shrink:0;}
.status-draft .status-indicator{background:#6b7280;}
.status-awaiting .status-indicator{background:#f59e0b;animation:pulse 2s infinite;}
.status-approved .status-indicator{background:#10b981;}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}
.error-box{padding:10px 12px;background:rgba(220,38,38,.12);border:1px solid #dc2626;color:#dc2626;border-radius:8px;font-size:13px;margin-bottom:12px;}
.form-grid select{border:1px solid var(--color-border-soft);border-radius:6px;padding:6px 8px;font-size:13px;background:var(--color-surface);color:var(--color-text);} 
.form-grid select:focus{outline:2px solid var(--color-primary);outline-offset:1px;}
.error-box{background:var(--color-danger);color:#fff;padding:10px 12px;border-radius:8px;font-size:13px;margin-bottom:12px;box-shadow:0 2px 6px -2px rgba(0,0,0,.4);}
.ai-info{background:#065f46;color:#d1fae5;padding:8px 12px;border-radius:6px;font-size:12px;margin:8px 0;border:1px solid #10b981;}
body:not(.dark) .ai-info{background:#ecfdf5;color:#065f46;border-color:#a7f3d0;}
.model-tag{background:#374151;color:#d1d5db;padding:2px 6px;border-radius:4px;font-size:10px;margin-left:8px;}
body:not(.dark) .model-tag{background:#f3f4f6;color:#374151;}

/* Responsive design */
@media (max-width: 1024px) {
  .modal{width:90vw;padding:14px 16px;}
  .thread-layout{flex-direction:column;gap:12px;}
  .order-col{min-width:auto;flex:none;}
  .msg{max-width:80%;}
}

@media (max-width: 768px) {
  .modal{width:100vw;height:100vh;max-height:100vh;border-radius:0;margin:0;}
  .modal-backdrop{padding:0;}
  .thread{padding:12px 16px;}
  .order-col{padding:12px 16px;}
  .msg{max-width:90%;padding:10px 14px;font-size:13px;}
}
